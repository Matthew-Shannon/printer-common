[gcode_macro AUTO_Z_TRAM]
gcode:
	G28
	Z_TILT_ADJUST
	G28

[stepper_z1]
step_pin: PB7
dir_pin: !PB6
enable_pin: !PB4
microsteps: ${constants.microsteps}
rotation_distance: ${constants.z_rot_dist}

[tmc2209 stepper_z1]
uart_pin: PB5
interpolate: ${constants.interpolate}
run_current: ${constants.xyz_run_current}
sense_resistor: ${constants.sense_resistor}

[autotune_tmc stepper_z1]
motor: creality-42-34
tuning_goal: silent

[z_tilt]
speed: ${constants.travel_speed}
horizontal_move_z: ${constants.z_horizontal_move}
use_probe_xy_offsets: ${constants.p_true}
z_positions:
    32.5, 155
    187.5, 155
points:
    ${constants.screw_near}, ${constants.screw_far}
    ${constants.screw_near}, ${constants.screw_near}
    ${constants.screw_far}, ${constants.screw_near}
    ${constants.screw_far}, ${constants.screw_far}
